```
   _____       _           _      _     _       
  / ____|     (_)         (_)    | |   | |      
 | (___   ___  _  ___  ___ _  ___| |__ | | ___  
  \___ \ / _ \| |/ _ \/ __| |/ _ \ '_ \| |/ _ \ 
  ____) | (_) | | (_) \__ \ |  __/ |_) | | (_) |
 |_____/ \___/| |\___/|___/_|\___|_.__/|_|\___/ 
             _/ |                                
            |__/                                 
```

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

**Sojmieblo** ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ª–∏—Ü –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ WebGL.  
**–¢–µ—Ö—Å—Ç–µ–∫:** Backend (Node.js, Express, Sharp), Frontend (Vanilla JS, WebGL/glfx.js), –º–µ—Ö–∞–Ω–∏–∫–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé® –î–µ—Ñ–æ—Ä–º–∞—Ü–∏—è –ª–∏—Ü –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –º—ã—à–∏
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≥–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç
- ‚ö° WebGL —É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã (60 FPS)
- üñºÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Drag & Drop –∏ –≤—Å—Ç–∞–≤–∫–∏ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
- üéöÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å–∏–ª–∞ –∏ —Ä–∞–¥–∏—É—Å –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üîí Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å systemd (Linux —Å–µ—Ä–≤–µ—Ä—ã)**
```bash
curl -fsSL https://raw.githubusercontent.com/Efidripy/sojmieblo/main/install.sh | sudo bash
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Nginx (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã)**
```bash
wget https://raw.githubusercontent.com/Efidripy/sojmieblo/main/deploy_sojmieblo.sh && chmod +x deploy_sojmieblo.sh && sudo ./deploy_sojmieblo.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**
```bash
git clone https://github.com/Efidripy/sojmieblo.git && cd sojmieblo && npm install && npm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 18+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20.x LTS)
- **–ë—Ä–∞—É–∑–µ—Ä** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WebGL (Chrome, Firefox, Safari, Edge)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - `express` (^4.18.2) ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
  - `express-rate-limit` (^6.7.0) ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
  - `sharp` (^0.33.2) ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - `uuid` (^9.0.1) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `public/config.js`.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
- `defaultBrushRadius: 100` ‚Äî —Ä–∞–¥–∏—É—Å –∫–∏—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (20-300px)
- `initialStrength: -0.5` ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏ (-1.5 –¥–æ 0)
- `strengthIncreaseRate: 0.5` ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏—è —Å–∏–ª—ã
- `maxFileSize: 10485760` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10MB)
- `enableDragAndDrop: true` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ `public/config.js`.

## üåê Nginx Configuration

If deploying with Nginx as a reverse proxy, ensure you configure the maximum upload size to match the application limits (30MB):

**For Nginx configuration**, add to your server block:
```nginx
server {
    # ... other configuration ...
    
    # Increase client body size limit for large image uploads (30MB)
    client_max_body_size 30M;
    
    location /api/ {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        
        # Important: Allow large uploads
        client_max_body_size 30M;
    }
}
```

After updating the configuration:
```bash
sudo nginx -t          # Test configuration
sudo systemctl reload nginx  # Apply changes
```

**Why Express.json limit is 50MB:**
- Frontend limit: 30MB for binary image data (CONFIG.upload.maxFileSize)
- Base64 encoding adds ~33% overhead: 30MB binary ‚Üí ~40MB base64
- Express.json limit: 50MB to safely accommodate base64-encoded images with buffer for HTTP headers and metadata
- Rate limiting: 100 requests per 15 minutes (configured in server.js)

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
systemctl status sojmieblo
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
journalctl -u sojmieblo -f
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
```bash
systemctl restart sojmieblo
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
systemctl stop sojmieblo
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```bash
cd /opt/sojmieblo && git pull origin main && npm install && systemctl restart sojmieblo
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/opt/sojmieblo/          # Backend
‚îú‚îÄ‚îÄ server.js            # Express —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ works/               # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

/var/www/sojmieblo/      # Frontend
‚îú‚îÄ‚îÄ index.html           # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ app.js               # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ workManager.js       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ imageProcessor.js    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ config.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ styles.css           # –°—Ç–∏–ª–∏
‚îî‚îÄ‚îÄ glfx.js              # WebGL –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É, –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Pull Request.
